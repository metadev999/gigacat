"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[808],{47702:(t,e,r)=>{r.d(e,{X:()=>o,k:()=>c});var i=r(84403),a=r(15586),s=r(14267),n=r(2955),o=class extends n.k{#t;#e;#r;#i;#a;#s;#n;constructor(t){super(),this.#n=!1,this.#s=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#i=t.client,this.#r=this.#i.getQueryCache(),this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#t=function(t){let e="function"==typeof t.initialData?t.initialData():t.initialData,r=void 0!==e,i=r?"function"==typeof t.initialDataUpdatedAt?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?i??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}(this.options),this.state=t.state??this.#t,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#a?.promise}setOptions(t){this.options={...this.#s,...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){this.observers.length||"idle"!==this.state.fetchStatus||this.#r.remove(this)}setData(t,e){let r=(0,i.pl)(this.state.data,t,this.options);return this.#o({data:r,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),r}setState(t,e){this.#o({type:"setState",state:t,setStateOptions:e})}cancel(t){let e=this.#a?.promise;return this.#a?.cancel(t),e?e.then(i.lQ).catch(i.lQ):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#t)}isActive(){return this.observers.some(t=>!1!==(0,i.Eh)(t.options.enabled,this))}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===i.hT||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return!!this.state.isInvalidated||(this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):void 0===this.state.data)}isStaleByTime(t=0){return this.state.isInvalidated||void 0===this.state.data||!(0,i.j3)(this.state.dataUpdatedAt,t)}onFocus(){let t=this.observers.find(t=>t.shouldFetchOnWindowFocus());t?.refetch({cancelRefetch:!1}),this.#a?.continue()}onOnline(){let t=this.observers.find(t=>t.shouldFetchOnReconnect());t?.refetch({cancelRefetch:!1}),this.#a?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(e=>e!==t),this.observers.length||(this.#a&&(this.#n?this.#a.cancel({revert:!0}):this.#a.cancelRetry()),this.scheduleGc()),this.#r.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#o({type:"invalidate"})}fetch(t,e){if("idle"!==this.state.fetchStatus){if(void 0!==this.state.data&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#a)return this.#a.continueRetry(),this.#a.promise}if(t&&this.setOptions(t),!this.options.queryFn){let t=this.observers.find(t=>t.options.queryFn);t&&this.setOptions(t.options)}let r=new AbortController,a=t=>{Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(this.#n=!0,r.signal)})},n={fetchOptions:e,options:this.options,queryKey:this.queryKey,client:this.#i,state:this.state,fetchFn:()=>{let t=(0,i.ZM)(this.options,e),r={client:this.#i,queryKey:this.queryKey,meta:this.meta};return(a(r),this.#n=!1,this.options.persister)?this.options.persister(t,r,this):t(r)}};a(n),this.options.behavior?.onFetch(n,this),this.#e=this.state,("idle"===this.state.fetchStatus||this.state.fetchMeta!==n.fetchOptions?.meta)&&this.#o({type:"fetch",meta:n.fetchOptions?.meta});let o=t=>{(0,s.wm)(t)&&t.silent||this.#o({type:"error",error:t}),(0,s.wm)(t)||(this.#r.config.onError?.(t,this),this.#r.config.onSettled?.(this.state.data,t,this)),this.scheduleGc()};return this.#a=(0,s.II)({initialPromise:e?.initialPromise,fn:n.fetchFn,abort:r.abort.bind(r),onSuccess:t=>{if(void 0===t){o(Error(`${this.queryHash} data is undefined`));return}try{this.setData(t)}catch(t){o(t);return}this.#r.config.onSuccess?.(t,this),this.#r.config.onSettled?.(t,this.state.error,this),this.scheduleGc()},onError:o,onFail:(t,e)=>{this.#o({type:"failed",failureCount:t,error:e})},onPause:()=>{this.#o({type:"pause"})},onContinue:()=>{this.#o({type:"continue"})},retry:n.options.retry,retryDelay:n.options.retryDelay,networkMode:n.options.networkMode,canRun:()=>!0}),this.#a.start()}#o(t){this.state=(e=>{switch(t.type){case"failed":return{...e,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...e,fetchStatus:"paused"};case"continue":return{...e,fetchStatus:"fetching"};case"fetch":return{...e,...c(e.data,this.options),fetchMeta:t.meta??null};case"success":return{...e,data:t.data,dataUpdateCount:e.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":let r=t.error;if((0,s.wm)(r)&&r.revert&&this.#e)return{...this.#e,fetchStatus:"idle"};return{...e,error:r,errorUpdateCount:e.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:e.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error"};case"invalidate":return{...e,isInvalidated:!0};case"setState":return{...e,...t.state}}})(this.state),a.jG.batch(()=>{this.observers.forEach(t=>{t.onQueryUpdate()}),this.#r.notify({query:this,type:"updated",action:t})})}};function c(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:(0,s.v_)(e.networkMode)?"fetching":"paused",...void 0===t&&{error:null,status:"pending"}}}},38179:(t,e,r)=>{r.d(e,{n:()=>N});var i=r(45732),a=r(62496),s=r(45757),n=r(72447),o=r(88429),c=r(30400),l=r(9869),h=r(66692),u=r(50957),d=r(98979),p=r(6035);async function f(t,{blockHash:e,blockNumber:r,blockTag:i,hash:a,index:n}){let o=i||"latest",c=void 0!==r?(0,d.cK)(r):void 0,l=null;if(a?l=await t.request({method:"eth_getTransactionByHash",params:[a]},{dedupe:!0}):e?l=await t.request({method:"eth_getTransactionByBlockHashAndIndex",params:[e,(0,d.cK)(n)]},{dedupe:!0}):(c||o)&&(l=await t.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[c||o,(0,d.cK)(n)]},{dedupe:!!c})),!l)throw new s.Kz({blockHash:e,blockNumber:r,blockTag:o,hash:a,index:n});return(t.chain?.formatters?.transaction?.format||p.uP)(l)}var y=r(3369),m=r(92342);let b=new Map,v=new Map;async function g(t,{cacheKey:e,cacheTime:r=Number.POSITIVE_INFINITY}){let i=function(t){let e=(t,e)=>({clear:()=>e.delete(t),get:()=>e.get(t),set:r=>e.set(t,r)}),r=e(t,b),i=e(t,v);return{clear:()=>{r.clear(),i.clear()},promise:r,response:i}}(e),a=i.response.get();if(a&&r>0&&new Date().getTime()-a.created.getTime()<r)return a.data;let s=i.promise.get();s||(s=t(),i.promise.set(s));try{let t=await s;return i.response.set({created:new Date,data:t}),t}finally{i.promise.clear()}}let w=t=>`blockNumber.${t}`;async function S(t,{cacheTime:e=t.cacheTime}={}){return BigInt(await g(()=>t.request({method:"eth_blockNumber"}),{cacheKey:w(t.uid),cacheTime:e}))}function k(t,{emitOnBegin:e=!1,emitMissed:r=!1,onBlockNumber:a,onError:s,poll:c,pollingInterval:l=t.pollingInterval}){let u;return(void 0!==c?c:"webSocket"!==t.transport.type&&("fallback"!==t.transport.type||"webSocket"!==t.transport.transports[0].config.type))?(()=>{let i=(0,h.A)(["watchBlockNumber",t.uid,e,r,l]);return(0,o.lB)(i,{onBlockNumber:a,onError:s},i=>(0,m.w)(async()=>{try{let e=await (0,n.T)(t,S,"getBlockNumber")({cacheTime:0});if(u){if(e===u)return;if(e-u>1&&r)for(let t=u+1n;t<e;t++)i.onBlockNumber(t,u),u=t}(!u||e>u)&&(i.onBlockNumber(e,u),u=e)}catch(t){i.onError?.(t)}},{emitOnBegin:e,interval:l}))})():(()=>{let n=(0,h.A)(["watchBlockNumber",t.uid,e,r]);return(0,o.lB)(n,{onBlockNumber:a,onError:s},e=>{let r=!0,a=()=>r=!1;return(async()=>{try{let s=(()=>{if("fallback"===t.transport.type){let e=t.transport.transports.find(t=>"webSocket"===t.config.type);return e?e.value:t.transport}return t.transport})(),{unsubscribe:n}=await s.subscribe({params:["newHeads"],onData(t){if(!r)return;let a=(0,i.uU)(t.result?.number);e.onBlockNumber(a,u),u=a},onError(t){e.onError?.(t)}});a=n,r||a()}catch(t){s?.(t)}})(),()=>a()})})()}async function T(t,{confirmations:e=1,hash:r,onReplaced:i,pollingInterval:d=t.pollingInterval,retryCount:p=6,retryDelay:m=({count:t})=>200*~~(1<<t),timeout:b=18e4}){let v,g,w;let S=(0,h.A)(["waitForTransactionReceipt",t.uid,r]),T=!1,{promise:C,resolve:F,reject:N}=(0,c.Y)(),R=b?setTimeout(()=>N(new s.WA({hash:r})),b):void 0,A=(0,o.lB)(S,{onReplaced:i,resolve:F,reject:N},i=>{let o=(0,n.T)(t,k,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:d,async onBlockNumber(c){let h=t=>{clearTimeout(R),o(),t(),A()},d=c;if(!T)try{if(w){if(e>1&&(!w.blockNumber||d-w.blockNumber+1n<e))return;h(()=>i.resolve(w));return}if(v||(T=!0,await (0,l.b)(async()=>{(v=await (0,n.T)(t,f,"getTransaction")({hash:r})).blockNumber&&(d=v.blockNumber)},{delay:m,retryCount:p}),T=!1),w=await (0,n.T)(t,y.h,"getTransactionReceipt")({hash:r}),e>1&&(!w.blockNumber||d-w.blockNumber+1n<e))return;h(()=>i.resolve(w))}catch(r){if(r instanceof s.Kz||r instanceof s.Kc){if(!v){T=!1;return}try{g=v,T=!0;let r=await (0,l.b)(()=>(0,n.T)(t,u.g,"getBlock")({blockNumber:d,includeTransactions:!0}),{delay:m,retryCount:p,shouldRetry:({error:t})=>t instanceof a.l});T=!1;let s=r.transactions.find(({from:t,nonce:e})=>t===g.from&&e===g.nonce);if(!s||(w=await (0,n.T)(t,y.h,"getTransactionReceipt")({hash:s.hash}),e>1&&(!w.blockNumber||d-w.blockNumber+1n<e)))return;let o="replaced";s.to===g.to&&s.value===g.value&&s.input===g.input?o="repriced":s.from===s.to&&0n===s.value&&(o="cancelled"),h(()=>{i.onReplaced?.({reason:o,replacedTransaction:g,transaction:s,transactionReceipt:w}),i.resolve(w)})}catch(t){h(()=>i.reject(t))}}else h(()=>i.reject(r))}}})});return C}var C=r(67993),F=r(43247);async function N(t,e){let{chainId:r,timeout:a=0,...s}=e,n=t.getClient({chainId:r}),o=(0,F.T)(n,T,"waitForTransactionReceipt"),c=await o({...s,timeout:a});if("reverted"===c.status){let t=(0,F.T)(n,f,"getTransaction"),e=await t({hash:c.transactionHash}),r=(0,F.T)(n,C.T,"call"),a=await r({...e,data:e.input,gasPrice:"eip1559"!==e.type?e.gasPrice:void 0,maxFeePerGas:"eip1559"===e.type?e.maxFeePerGas:void 0,maxPriorityFeePerGas:"eip1559"===e.type?e.maxPriorityFeePerGas:void 0});throw Error(a?.data?(0,i.IQ)(`0x${a.data.substring(138)}`):"unknown reason")}return{...c,chainId:n.chain.id}}},88429:(t,e,r)=>{r.d(e,{lB:()=>n});let i=new Map,a=new Map,s=0;function n(t,e,r){let n=++s,o=()=>i.get(t)||[],c=()=>{let e=o();i.set(t,e.filter(t=>t.id!==n))},l=()=>{let e=o();if(!e.some(t=>t.id===n))return;let r=a.get(t);1===e.length&&r&&r(),c()},h=o();if(i.set(t,[...h,{id:n,fns:e}]),h&&h.length>0)return l;let u={};for(let t in e)u[t]=(...e)=>{let r=o();if(0!==r.length)for(let i of r)i.fns[t]?.(...e)};let d=r(u);return"function"==typeof d&&a.set(t,d),l}},92342:(t,e,r)=>{r.d(e,{w:()=>a});var i=r(23646);function a(t,{emitOnBegin:e,initialWaitTime:r,interval:a}){let s=!0,n=()=>s=!1;return(async()=>{let o;e&&(o=await t({unpoll:n}));let c=await r?.(o)??a;await (0,i.u)(c);let l=async()=>{s&&(await t({unpoll:n}),await (0,i.u)(a),l())};l()})(),n}}}]);